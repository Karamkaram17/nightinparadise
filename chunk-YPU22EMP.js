import{f as P}from"./chunk-AJ34JRYF.js";import{e as M}from"./chunk-SGK6T4UK.js";import"./chunk-CKGA4VUY.js";import{a as T,b as N,c as O,e as H,g as V}from"./chunk-6RLEIIP6.js";import"./chunk-ZHARXMO6.js";import{a as $}from"./chunk-3AY5ZZWG.js";import"./chunk-RGNDWIHZ.js";import{a as S,c as j}from"./chunk-QS2U6FLA.js";import"./chunk-J7C7WOHV.js";import{Ab as u,Da as R,Gb as v,L as y,Lb as a,Mb as s,Nb as k,Ub as F,Wb as h,ca as _,eb as o,ec as l,fb as w,gc as c,ha as D,ia as m,lc as A,m as C,ma as p,mc as x,n as g,nc as E,pb as I,vb as f}from"./chunk-X2WLLBA3.js";var b=(()=>{let e=class e{constructor(t){this._networkService=t,this._reviews$=new g([]),this.reviews$=this._reviews$.asObservable(),this.changes$=new g({})}getAllReviews(){this._networkService.get(S.REVIEWS).pipe(y(1)).subscribe(t=>{t&&Array.isArray(t.data)&&this._reviews$.next(t.data)})}deleteReview(t){this._networkService.delete(S.REVIEWS,t._id).pipe(y(1)).subscribe(()=>{this.getAllReviews()})}};e.\u0275fac=function(r){return new(r||e)(D(j))},e.\u0275prov=_({token:e,factory:e.\u0275fac});let i=e;return i})();function z(i){let e=i.split("-");return`${e[2]}/${e[1]}/${e[0]}`}var U=()=>({title:"Review"});function B(i,e){if(i&1&&(a(0,"div",1)(1,"ul",2)(2,"li",3),l(3),s(),a(4,"li",3),l(5),s(),a(6,"li",3),l(7),s(),a(8,"li",3),l(9),s(),a(10,"li",3),l(11),s(),a(12,"li",3),l(13),s(),a(14,"li",3),l(15),s(),a(16,"li",3),l(17),s(),a(18,"li",3),l(19),s()()()),i&2){let n=h();o(3),c("Customer Name: ",n.data.name,""),o(2),c("Experience: ",n.data.experience," / 5 stars"),o(2),c("Cleanliness: ",n.data.cleanliness," / 5 stars"),o(2),c("Comfort: ",n.data.comfort," / 5 stars"),o(2),c("Amenities: ",n.data.amenities," / 5 stars"),o(2),c("Customer Service: ",n.data.customerService," / 5 stars"),o(2),c("Recommend: ",n.data.recommend?"Yes":"No",""),o(2),c("Improvement: ",n.data.improvement?n.data.improvement:"N/A",""),o(2),c("Comments: ",n.data.comments?n.data.comments:"N/A","")}}var G=(()=>{let e=class e{constructor(t,r){this.data=t,this._dialogRef=r}handleDialogActions(t){(!t||t==="ok"||t==="cancel")&&this.closeDialog()}changeDate(t){return z(t)}closeDialog(){this._dialogRef.close()}};e.\u0275fac=function(r){return new(r||e)(w(O),w(N))},e.\u0275cmp=p({type:e,selectors:[["app-review-popup"]],standalone:!0,features:[x],decls:2,vars:3,consts:[[3,"btnClicked","config"],[1,"container","py-2","cd-max"],[1,"row","text-start"],[1,"cs-r"]],template:function(r,d){r&1&&(a(0,"kss-lib-confirm-body",0),F("btnClicked",function(){return d.handleDialogActions()}),f(1,B,20,9,"div",1),s()),r&2&&(u("config",E(2,U)),o(),v(d.data?1:-1))},dependencies:[V],styles:[".cs-r[_ngcontent-%COMP%]{padding:7px;font-size:16px}"],changeDetection:0});let i=e;return i})();function L(i,e){if(i&1&&k(0,"kss-lib-table",0),i&2){let n=h();u("config",n.gridConfig)("refresh$",n.refresh$)}}var ue=(()=>{let e=class e{constructor(){this._dialog=m(H),this._destroyRef=m(R),this._reviewsService=m(b),this._navService=m(T),this.refresh$=new C}ngOnInit(){this._navService.updateNav({show:!0,back:!1,title:$.LAYOUT.children.REVIEWS.name,buttons:[]}),this._reviewsService.getAllReviews(),this._initializeGrid(),this._reviewsService.reviews$.pipe(M(this._destroyRef)).subscribe(t=>{this.refresh$.next({data:t})})}_initializeGrid(){this.gridConfig={data:I([]),defaultPagination:100,maxTableHeight:"calc(100dvh - 115px - 50px - 50px - 80px)",noDataMessage:"No Users Found",elevation:8,features:{showSearch:!0},columns:[{field:"name",title:"Customer Name",type:"string",readonlyFn:()=>!0,position:"p-start"},{title:"Experience",field:"experience",type:"number",readonlyFn:()=>!0,extraStyles:{width:"150px"}},{title:"Cleanliness",field:"cleanliness",type:"number",readonlyFn:()=>!0,extraStyles:{width:"150px"}},{title:"Comfort",field:"comfort",type:"number",readonlyFn:()=>!0,extraStyles:{width:"150px"}},{title:"Amenities",field:"amenities",type:"number",readonlyFn:()=>!0,extraStyles:{width:"150px"}},{title:"Customer Service",field:"customerService",type:"number",readonlyFn:()=>!0,extraStyles:{width:"150px"}},{title:"Date",field:"createdAt",type:"date",readonlyFn:()=>!0,dateFormat:"dd/MM/yyyy - HH:mm:ss a",extraStyles:{width:"170px"}}],actionsColumn:{enabled:!0,buttons:[{icon:{icon:"eye"},label:"View",onClickFn:t=>this._openReviewPopup(t)}]}}}_openReviewPopup(t){this._dialog.open(G,{width:"95vw",maxWidth:"500px",maxHeight:"95vh",disableClose:!0,autoFocus:!1,restoreFocus:!0,data:t})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=p({type:e,selectors:[["ks-solutions-reviews-listing"]],standalone:!0,features:[A([b]),x],decls:1,vars:1,consts:[[3,"config","refresh$"]],template:function(r,d){r&1&&f(0,L,1,2,"kss-lib-table",0),r&2&&v(d.gridConfig?0:-1)},dependencies:[P],changeDetection:0});let i=e;return i})();export{ue as ReviewsComponent};
