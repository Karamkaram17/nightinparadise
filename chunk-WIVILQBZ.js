import{a as A}from"./chunk-DCGNKLII.js";import{b as F}from"./chunk-5WRQQIVF.js";import"./chunk-7DPY6W6N.js";import"./chunk-QCDKRENM.js";import"./chunk-7ODROQ6I.js";import{a as l}from"./chunk-75LTBHHO.js";import{a as r}from"./chunk-US4DBW3U.js";import"./chunk-IXDNPNBC.js";import{f as S}from"./chunk-AJ34JRYF.js";import{e as s}from"./chunk-SGK6T4UK.js";import{m as C}from"./chunk-CKGA4VUY.js";import{a as B,e as D}from"./chunk-6RLEIIP6.js";import"./chunk-ZHARXMO6.js";import{a as y}from"./chunk-3AY5ZZWG.js";import"./chunk-RGNDWIHZ.js";import"./chunk-QS2U6FLA.js";import"./chunk-J7C7WOHV.js";import{Ab as w,Da as m,Gb as b,L as u,Nb as x,Wb as v,ia as a,m as p,ma as f,mc as _,pb as g,vb as h}from"./chunk-X2WLLBA3.js";function N(t,i){if(t&1&&x(0,"kss-lib-table",0),t&2){let c=v();w("config",c.gridConfig)("refresh$",c.refresh$)}}var d=function(t){return t.new="Add Bungalow",t}(d||{}),z=(()=>{let i=class i{constructor(){this._dialog=a(D),this._destroyRef=a(m),this._navService=a(B),this._bungalowsService=a(A),this.refresh$=new p,this._canAdd=l(r.ADD_BUNGALOW),this._canEdit=l(r.EDIT_BUNGALOW)}ngOnInit(){this._navService.updateNav({show:!0,back:!1,title:y.LAYOUT.children.BUNGALOWS.name,buttons:[{label:d.new,prefixIcon:{icon:"plus_circle",extraClass:"me-1"},hide:!this._canAdd}]}),this._navService.buttonClicked$.pipe(s(this._destroyRef)).subscribe(e=>{e===d.new&&this._openBungalowPopup()}),this._bungalowsService.getAllBungalows(),this._initializeGrid()}ngAfterViewInit(){this._bungalowsService.bungalow$.pipe(s(this._destroyRef)).subscribe(e=>{this.refresh$.next({data:e})})}_initializeGrid(){this.gridConfig={data:g([]),defaultPagination:100,maxTableHeight:"calc(100dvh - 115px - 50px - 50px - 80px)",noDataMessage:"No Bungalows Found",features:{showSearch:!0},elevation:2,columns:[{field:"name",title:"Bungalow Name",type:"string",readonlyFn:()=>!0,extraStyles:{"max-width":"300px"}},{field:"description",title:"Description",type:"string",readonlyFn:()=>!0,extraStyles:{"min-width":"100px"}},{field:"active",title:"Active",type:"chip",extraStyles:{width:"120px"},readonlyFn:()=>!0,truthy:{false:"No",true:"Yes"},setChipClass:e=>e.active?"rounded rounded-5 px-3 py-1 text-bg-success cs-w-120":"rounded rounded-5 px-3 py-1 text-bg-danger cs-w-120"},{field:"createdAt",title:"Created At",type:"date",readonlyFn:()=>!0,extraStyles:{width:"180px"},dateFormat:"dd/MM/yyyy - HH:mm:ss a"}],actionsColumn:{enabled:this._canEdit,buttons:[{icon:{icon:"edit"},label:"Edit",onClickFn:e=>this._openBungalowPopup(e)}]}}}_openBungalowPopup(e){let o={data:e,config:{title:e?"Edit Bungalow":"Add Bungalow",showCancel:!0,showSave:!0},fields:[{fieldName:"name",input:{label:"Bungalow Name"},validators:[C.required],textMaxLength:30},{fieldName:"description",input:{label:"Description"},textMaxLength:100},{fieldName:"active",checkbox:{label:"Active"}}]};this._dialog.open(F,{width:"95vw",maxWidth:"500px",maxHeight:"95vh",disableClose:!0,autoFocus:!1,restoreFocus:!0,data:o}).afterClosed().pipe(u(1)).subscribe(n=>{n&&(e?this._bungalowsService.updateBungalows(n):this._bungalowsService.addBungalows(n))})}};i.\u0275fac=function(o){return new(o||i)},i.\u0275cmp=f({type:i,selectors:[["ks-solutions-bungalows-listing"]],standalone:!0,features:[_],decls:1,vars:1,consts:[[3,"config","refresh$"]],template:function(o,n){o&1&&h(0,N,1,2,"kss-lib-table",0),o&2&&b(n.gridConfig?0:-1)},dependencies:[S],changeDetection:0});let t=i;return t})();export{z as BungalowsComponent};
